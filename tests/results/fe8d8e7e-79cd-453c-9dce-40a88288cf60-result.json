{"name": "test_create_pet_wth_photo_positive", "status": "broken", "statusDetails": {"message": "TypeError: a bytes-like object is required, not 'NoneType'", "trace": "self = <tests.test_my_pets_positive.TestMyPetsPagePositive object at 0x0000021AD5E060E0>, driver = <selenium.webdriver.chrome.webdriver.WebDriver (session=\"8e58048b549ffdaf5eac6c0de71c4db0\")>\n\n    @pytest.mark.two\n    @pytest.mark.create_wth_photo\n    @allure.feature('Создание карточек питомцев_POSITIVE TESTS')\n    @allure.story(\"Создание карточки питомца с фото\")\n    @allure.severity(allure.severity_level.BLOCKER)\n    def test_create_pet_wth_photo_positive(self, driver):\n        \"\"\"Позитивный тест проверки создания карточки питомца с фото. Валидация теста выполнена успешно в случае, если\n         после ввода всех необходимых данных в форму карточки, пользователь остается на страницы с эндпоинтом\n         \"/my_pets\", а карточка отображается в стеке питомцев пользователя со всеми указанными данными.\"\"\"\n    \n        with allure.step(\"Шаг 1: Ввод данных и создание карточки питомца c фото.\"):\n            page = MyPetsPage(driver)\n            page.add_pet_btn_click()\n            page.enter_photo(photo_2_jpg)\n            page.enter_name(\"Чарльз\")\n            page.enter_breed(\"британская вислоухая\")\n            page.enter_age(9)\n            page.submit_pet_btn_click()\n        with allure.step(\"Шаг 2: Перезагрузка страницы с созданной карточкой питомца.\"):\n            page.refresh_page()\n            page.wait_page_loaded()\n        with allure.step(\"Шаг 3: Assert-проверка успешной валидации теста.\"):\n            if page.get_relative_link() != \"/my_pets\":\n                screenshot = page.get_page_screenshot_PNG()\n                allure.attach(screenshot,\n                              name=\"create_pet_wth_photo_FAILED\",\n                              attachment_type=allure.attachment_type.PNG)\n                print(Style.DIM + Fore.RED + f\"\\nКарточка питомца не создана!\")\n            else:\n                assert page.get_relative_link() == \"/my_pets\"\n                screenshot = page.get_page_screenshot_PNG()\n>               allure.attach(screenshot,\n                              name=\"create_pet_wth_photo_PASSED\",\n                              attachment_type=allure.attachment_type.PNG)\n\ntest_my_pets_positive.py:69: \n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n..\\..\\pythonProject12\\venv\\lib\\site-packages\\allure_commons\\_allure.py:200: in __call__\n    plugin_manager.hook.attach_data(body=body, name=name, attachment_type=attachment_type, extension=extension)\n..\\..\\pythonProject12\\venv\\lib\\site-packages\\pluggy\\_hooks.py:493: in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n..\\..\\pythonProject12\\venv\\lib\\site-packages\\pluggy\\_manager.py:115: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n..\\..\\pythonProject12\\venv\\lib\\site-packages\\allure_pytest\\listener.py:249: in attach_data\n    self.allure_logger.attach_data(uuid4(), body, name=name, attachment_type=attachment_type, extension=extension)\n..\\..\\pythonProject12\\venv\\lib\\site-packages\\allure_commons\\reporter.py:165: in attach_data\n    plugin_manager.hook.report_attached_data(body=body, file_name=file_name)\n..\\..\\pythonProject12\\venv\\lib\\site-packages\\pluggy\\_hooks.py:493: in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n..\\..\\pythonProject12\\venv\\lib\\site-packages\\pluggy\\_manager.py:115: in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n_ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _ _\n\nself = <allure_commons.logger.AllureFileLogger object at 0x0000021AD5D8F8B0>, body = None, file_name = '81699a1c-ec7e-417b-ab96-9e4411bc8e4b-attachment.png'\n\n    @hookimpl\n    def report_attached_data(self, body, file_name):\n        destination = self._report_dir / file_name\n        with open(destination, 'wb') as attached_file:\n            if isinstance(body, str):\n                attached_file.write(body.encode('utf-8'))\n            else:\n>               attached_file.write(body)\nE               TypeError: a bytes-like object is required, not 'NoneType'\n\n..\\..\\pythonProject12\\venv\\lib\\site-packages\\allure_commons\\logger.py:53: TypeError"}, "description": "Позитивный тест проверки создания карточки питомца с фото. Валидация теста выполнена успешно в случае, если\n         после ввода всех необходимых данных в форму карточки, пользователь остается на страницы с эндпоинтом\n         \"/my_pets\", а карточка отображается в стеке питомцев пользователя со всеми указанными данными.", "steps": [{"name": "Шаг 1: Ввод данных и создание карточки питомца c фото.", "status": "passed", "start": 1705660572677, "stop": 1705660573161}, {"name": "Шаг 2: Перезагрузка страницы с созданной карточкой питомца.", "status": "passed", "start": 1705660573162, "stop": 1705660576503}, {"name": "Шаг 3: Assert-проверка успешной валидации теста.", "status": "broken", "statusDetails": {"message": "TypeError: a bytes-like object is required, not 'NoneType'\n", "trace": "  File \"C:\\Users\\agafo\\PycharmProjects\\pythonProject15_PageObjects_tests\\tests\\test_my_pets_positive.py\", line 69, in test_create_pet_wth_photo_positive\n    allure.attach(screenshot,\n  File \"C:\\Users\\agafo\\PycharmProjects\\pythonProject12\\venv\\lib\\site-packages\\allure_commons\\_allure.py\", line 200, in __call__\n    plugin_manager.hook.attach_data(body=body, name=name, attachment_type=attachment_type, extension=extension)\n  File \"C:\\Users\\agafo\\PycharmProjects\\pythonProject12\\venv\\lib\\site-packages\\pluggy\\_hooks.py\", line 493, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"C:\\Users\\agafo\\PycharmProjects\\pythonProject12\\venv\\lib\\site-packages\\pluggy\\_manager.py\", line 115, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"C:\\Users\\agafo\\PycharmProjects\\pythonProject12\\venv\\lib\\site-packages\\pluggy\\_callers.py\", line 113, in _multicall\n    raise exception.with_traceback(exception.__traceback__)\n  File \"C:\\Users\\agafo\\PycharmProjects\\pythonProject12\\venv\\lib\\site-packages\\pluggy\\_callers.py\", line 77, in _multicall\n    res = hook_impl.function(*args)\n  File \"C:\\Users\\agafo\\PycharmProjects\\pythonProject12\\venv\\lib\\site-packages\\allure_pytest\\listener.py\", line 249, in attach_data\n    self.allure_logger.attach_data(uuid4(), body, name=name, attachment_type=attachment_type, extension=extension)\n  File \"C:\\Users\\agafo\\PycharmProjects\\pythonProject12\\venv\\lib\\site-packages\\allure_commons\\reporter.py\", line 165, in attach_data\n    plugin_manager.hook.report_attached_data(body=body, file_name=file_name)\n  File \"C:\\Users\\agafo\\PycharmProjects\\pythonProject12\\venv\\lib\\site-packages\\pluggy\\_hooks.py\", line 493, in __call__\n    return self._hookexec(self.name, self._hookimpls, kwargs, firstresult)\n  File \"C:\\Users\\agafo\\PycharmProjects\\pythonProject12\\venv\\lib\\site-packages\\pluggy\\_manager.py\", line 115, in _hookexec\n    return self._inner_hookexec(hook_name, methods, kwargs, firstresult)\n  File \"C:\\Users\\agafo\\PycharmProjects\\pythonProject12\\venv\\lib\\site-packages\\pluggy\\_callers.py\", line 113, in _multicall\n    raise exception.with_traceback(exception.__traceback__)\n  File \"C:\\Users\\agafo\\PycharmProjects\\pythonProject12\\venv\\lib\\site-packages\\pluggy\\_callers.py\", line 77, in _multicall\n    res = hook_impl.function(*args)\n  File \"C:\\Users\\agafo\\PycharmProjects\\pythonProject12\\venv\\lib\\site-packages\\allure_commons\\logger.py\", line 53, in report_attached_data\n    attached_file.write(body)\n"}, "attachments": [{"name": "create_pet_wth_photo_PASSED", "source": "81699a1c-ec7e-417b-ab96-9e4411bc8e4b-attachment.png", "type": "image/png"}], "start": 1705660576503, "stop": 1705660576618}], "start": 1705660572677, "stop": 1705660576619, "uuid": "f8e84202-eb0d-4224-a5d0-133a53b47105", "historyId": "2bf2cd18aff95ad4baceb530d9ec8df9", "testCaseId": "2bf2cd18aff95ad4baceb530d9ec8df9", "fullName": "tests.test_my_pets_positive.TestMyPetsPagePositive#test_create_pet_wth_photo_positive", "labels": [{"name": "severity", "value": "blocker"}, {"name": "feature", "value": "Создание карточек питомцев_POSITIVE TESTS"}, {"name": "story", "value": "Создание карточки питомца с фото"}, {"name": "tag", "value": "create_wth_photo"}, {"name": "tag", "value": "two"}, {"name": "parentSuite", "value": "tests"}, {"name": "suite", "value": "test_my_pets_positive"}, {"name": "subSuite", "value": "TestMyPetsPagePositive"}, {"name": "host", "value": "DESKTOP-J32RPI2"}, {"name": "thread", "value": "2316-MainThread"}, {"name": "framework", "value": "pytest"}, {"name": "language", "value": "cpython3"}, {"name": "package", "value": "tests.test_my_pets_positive"}]}